function generatePast5Minutes(){let t=[];const e=Date.now();for(let a=300;a>0;a--)t.push([e-5e3*a,0]);return t}function createLineChart(t){const e={chart:{height:350,type:"area",animations:{enabled:!1},dropShadow:{enabled:!1},toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight",width:1},grid:{padding:{left:0,right:0}},markers:{size:0,hover:{size:0}},series:[{name:"CPU Usage",data:generatePast5Minutes()},{name:"CPU Temperature",data:generatePast5Minutes()},{name:"Memory Usage",data:generatePast5Minutes()},{name:"Disk Usage",data:generatePast5Minutes()}],xaxis:{type:"datetime",labels:{formatter:function(t){const e=new Date(t);let a=e.getHours(),s=e.getMinutes(),n=e.getSeconds();return a=(a<10?"0":"")+a,s=(s<10?"0":"")+s,n=(n<10?"0":"")+n,a+":"+s+":"+n}}},yaxis:{max:100},title:{text:"Past 5 Minutes",align:"left",style:{fontSize:"12px"}},legend:{show:!0,floating:!0,horizontalAlign:"left",onItemClick:{toggleDataSeries:!1},position:"top",offsetY:-38,offsetX:100}},a=new ApexCharts(document.getElementById(t),e);return a.render(),a}function createProgressCharts(t,e,a){let s=[];return t.forEach((function(n,o){const i=new ApexCharts(document.getElementById(t[o]),{chart:{height:70,type:"bar",stacked:!0,sparkline:{enabled:!0}},plotOptions:{bar:{horizontal:!0,barHeight:"20%",colors:{backgroundBarColors:["#40475D"]}}},colors:[a[o]],stroke:{width:0},series:[{name:e[o],data:[0]}],title:{floating:!0,offsetX:-10,offsetY:5,text:e[o]},subtitle:{floating:!0,align:"right",offsetY:0,text:"Awaiting...",style:{fontSize:"20px"}},tooltip:{enabled:!1},xaxis:{categories:[e[o]]},yaxis:{max:100},fill:{type:"full"}});i.render(),s.push(i)})),s}async function getSystemStatus(t){let e="/sysinfo";return"localhost"!==t&&(e=`http://${t}${e}`),await fetch(e)}function setProgressOptions(t,e,a){"number"!=typeof e||isNaN(e)?t.updateOptions({series:[{data:[0]}],subtitle:{text:"Unavailable"}}):t.updateOptions({series:[{data:[e]}],subtitle:{text:a}})}async function updateCharts(t,e,a,s){let n=!1;const o=await getSystemStatus(t).catch((()=>n=!0));if(n||!o.ok)return;const i=await o.json(),r=i.cpu_usage,l=i.cpu_temp,d=i.used_memory/i.total_memory*100,u=i.used_disk/i.total_disk*100;setProgressOptions(e[0],r,`${r}%`),setProgressOptions(e[1],d,`${i.used_memory}/${i.total_memory}MB`),setProgressOptions(e[2],u,`${i.used_disk}/${i.total_disk}GB`),setProgressOptions(a[0],l,`${l}Â°C`);const c=s.w.config.series,g=Date.now();s.updateSeries([{data:[...c[0].data.slice(-59),[g,r]]},{data:[...c[1].data.slice(-59),[g,l]]},{data:[...c[2].data.slice(-59),[g,d]]},{data:[...c[3].data.slice(-59),[g,u]]}])}
